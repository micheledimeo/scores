{
  "projectName": "MusicXML Scores for Nextcloud",
  "version": "0.9.2",
  "description": "Display, play, and manage MusicXML files directly in Nextcloud using OpenSheetMusicDisplay",
  "techStack": {
    "frontend": {
      "framework": "Vue 3",
      "buildTool": "Vite 5.2",
      "language": "JavaScript/TypeScript",
      "uiLibrary": "@nextcloud/vue 9.0",
      "musicRendering": "OpenSheetMusicDisplay 1.8.8",
      "audioEngine": "osmd-audio-player 0.7.0",
      "styling": "SCSS/CSS"
    },
    "backend": {
      "language": "PHP",
      "version": "8.1+",
      "framework": "Nextcloud App",
      "compatibility": "Nextcloud 28.x - 33.x"
    },
    "runtime": {
      "nodeVersion": "20.x",
      "npmVersion": "10.x",
      "phpVersion": "8.1 - 8.4"
    }
  },
  "features": [
    {
      "name": "Sheet Music Display",
      "description": "Render MusicXML, MusicXML compressed (.mxl), MEI, and Guitar Pro files",
      "type": "core",
      "components": ["MusicViewer.vue"],
      "library": "OpenSheetMusicDisplay"
    },
    {
      "name": "Advanced Playback Controls",
      "description": "Play, pause, stop, and loop with real-time cursor tracking",
      "type": "core",
      "components": ["MusicViewer.vue"],
      "library": "osmd-audio-player"
    },
    {
      "name": "Instrument Mixer",
      "description": "Individual volume control for each instrument/channel with solo/mute capabilities",
      "type": "advanced",
      "components": ["MusicViewer.vue", "MixerInstrumentPlayer.js"]
    },
    {
      "name": "Tempo & Volume Control",
      "description": "Precise BPM adjustment (40-240) and master volume with numeric inputs",
      "type": "core",
      "range": {
        "tempo": "40-240 BPM",
        "volume": "0-100"
      }
    },
    {
      "name": "Progress Tracking",
      "description": "Visual progress bar with current time and measure indicators",
      "type": "core",
      "components": ["MusicViewer.vue"]
    },
    {
      "name": "Keyboard Shortcuts",
      "description": "Space (play/pause), arrows (navigate measures), +/- (zoom)",
      "type": "usability",
      "shortcuts": {
        "Space": "Play/Pause",
        "ArrowLeft": "Previous measure",
        "ArrowRight": "Next measure",
        "+": "Zoom in",
        "-": "Zoom out"
      }
    },
    {
      "name": "Smart Search",
      "description": "Real-time search with match counter across all scores and folders",
      "type": "navigation",
      "components": ["App.vue"]
    },
    {
      "name": "Folder Navigation",
      "description": "Organized folder tree with expandable/collapsible folders and file counts",
      "type": "navigation",
      "components": ["App.vue"]
    },
    {
      "name": "Smart File Display",
      "description": "Automatic left truncation for files in folders to show instrument names",
      "type": "ui/ux",
      "maxLength": "36 chars"
    },
    {
      "name": "Internationalization",
      "description": "Full i18n support with translation system",
      "type": "localization",
      "library": "@nextcloud/l10n"
    },
    {
      "name": "Responsive Design",
      "description": "Adaptive layout with collapsible sidebar and optimized spacing",
      "type": "ui/ux",
      "mobile": true
    },
    {
      "name": "Admin Settings",
      "description": "Configure multiple scores folder paths for all users with folder browser",
      "type": "admin",
      "components": ["App.vue", "SettingsController.php"]
    }
  ],
  "supportedFormats": [
    {
      "format": "MusicXML",
      "extensions": [".xml", ".musicxml", ".mxml"]
    },
    {
      "format": "MusicXML Compressed",
      "extensions": [".mxl"]
    },
    {
      "format": "MEI (Music Encoding Initiative)",
      "extensions": [".mei"]
    },
    {
      "format": "Guitar Pro",
      "extensions": [".gp", ".gp3", ".gp4", ".gp5", ".gpx"]
    }
  ],
  "components": {
    "vue": [
      {
        "name": "App.vue",
        "path": "src/components/App.vue",
        "description": "Main app component with navigation, search, folder tree, and settings modal",
        "features": [
          "Sidebar navigation",
          "Search with counter",
          "Folder expansion",
          "Settings modal",
          "Folder browser"
        ]
      },
      {
        "name": "MusicViewer.vue",
        "path": "src/components/MusicViewer.vue",
        "description": "Score viewer with playback controls, mixer, and keyboard shortcuts",
        "features": [
          "OSMD rendering",
          "Playback controls",
          "Tempo/volume controls",
          "Zoom controls",
          "Mixer channels",
          "Progress bar",
          "Keyboard shortcuts",
          "Welcome screen"
        ]
      }
    ],
    "utils": [
      {
        "name": "MixerInstrumentPlayer.js",
        "path": "src/utils/MixerInstrumentPlayer.js",
        "description": "Mixer implementation with channel states (PLAY, SOLO, MUTE)"
      }
    ],
    "php": [
      {
        "name": "PageController.php",
        "path": "lib/Controller/PageController.php",
        "description": "Main page rendering controller"
      },
      {
        "name": "ApiController.php",
        "path": "lib/Controller/ApiController.php",
        "description": "API endpoints for file operations"
      },
      {
        "name": "SettingsController.php",
        "path": "lib/Controller/SettingsController.php",
        "description": "Admin settings API"
      }
    ]
  },
  "apiEndpoints": [
    {
      "path": "/index.php/apps/mxmlscores/",
      "method": "GET",
      "description": "Main app page"
    },
    {
      "path": "/index.php/apps/mxmlscores/api/*",
      "method": "GET/POST",
      "description": "API endpoints for file operations"
    }
  ],
  "dependencies": {
    "core": [
      "vue@3.4.0",
      "@nextcloud/vue@9.0.0",
      "opensheetmusicdisplay@1.8.8",
      "osmd-audio-player@0.7.0"
    ],
    "nextcloud": [
      "@nextcloud/auth",
      "@nextcloud/axios",
      "@nextcloud/dialogs",
      "@nextcloud/event-bus",
      "@nextcloud/initial-state",
      "@nextcloud/l10n",
      "@nextcloud/router"
    ],
    "ui": [
      "vue-material-design-icons@5.3.0"
    ]
  },
  "testCoverage": {
    "framework": "Playwright",
    "totalTests": 73,
    "testFiles": [
      "app.spec.ts",
      "keyboard-and-features.spec.ts",
      "file-formats.spec.ts",
      "folder-navigation-and-truncation.spec.ts",
      "sidebar-and-mixer.spec.ts",
      "online-simple.spec.ts"
    ],
    "testDirectory": ".mxmlscores-testsprite/tests"
  },
  "deployment": {
    "script": "deploy-production.sh",
    "target": "Production server via SSH",
    "steps": [
      "Build app locally",
      "Deploy files via SSH",
      "Set ownership and permissions",
      "Run Nextcloud upgrade"
    ]
  }
}

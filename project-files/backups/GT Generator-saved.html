<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulazione Esame GT25</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f4f8;
            color: #1a1a1a;
        }
        .theme-primary-bg { background-color: #246db5; }
        .theme-primary-text { color: #ffffff; }
        .theme-secondary-bg { background-color: #5cadff; }
        .theme-secondary-text { color: #5cadff; }
        .theme-text { color: #1a1a1a; }
        .theme-bg { background-color: #ffffff; }

        .btn-primary {
            background-color: #246db5;
            color: #ffffff;
            transition: background-color 0.3s ease, transform 0.2s ease;
        }
        .btn-primary:hover {
            background-color: #1e5a9a;
            transform: translateY(-2px);
        }
        .btn-primary:disabled {
            background-color: #a0aec0;
            cursor: not-allowed;
            transform: none;
        }
        .btn-secondary {
            background-color: #e2e8f0;
            color: #4a5568;
            transition: background-color 0.3s ease, transform 0.2s ease;
        }
        .btn-secondary:hover {
            background-color: #cbd5e0;
            transform: translateY(-2px);
        }
        
        .option-label {
            transition: all 0.2s ease-in-out;
        }

        .option-label.selected {
            border-color: #5cadff;
            background-color: #ebf5ff;
            box-shadow: 0 0 0 2px #5cadff;
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen p-4">

    <div id="app-container" class="w-full max-w-3xl mx-auto">

        <!-- Home Screen -->
        <div id="home-screen" class="theme-bg rounded-2xl shadow-xl p-8 md:p-12 text-center fade-in">
            <svg class="w-16 h-16 mx-auto mb-4 text-[#246db5]" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"></path></svg>
            <h1 class="text-3xl md:text-4xl font-bold theme-text mb-3">Simulazione Esame Scritto GT25</h1>
            <p class="text-gray-600 text-base md:text-lg mb-8">Crea una simulazione di test a risposta multipla di 80 domande per la prova scritta del bando GT25.</p>
            <div class="bg-blue-50 border-l-4 border-blue-400 p-4 rounded-md text-left mb-8">
                <div class="flex">
                    <div class="py-1"><svg class="w-6 h-6 text-blue-500 mr-4" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path></svg></div>
                    <div>
                        <p class="font-bold">Regole del test:</p>
                        <ul class="list-disc list-inside text-gray-700 mt-1">
                            <li><strong>Durata:</strong> 90 minuti</li>
                            <li><strong>Domande:</strong> 80 a risposta multipla</li>
                            <li><strong>Punteggio:</strong> +0.50 corretta, -0.25 errata, 0 non data</li>
                            <li><strong>Superamento:</strong> Punteggio minimo di 25/40</li>
                        </ul>
                    </div>
                </div>
            </div>
            <button id="start-btn" class="btn-primary font-bold py-3 px-10 text-lg rounded-full shadow-lg">Inizia il Test</button>
        </div>

        <!-- Test Screen -->
        <div id="test-screen" class="hidden theme-bg rounded-2xl shadow-xl w-full fade-in">
            <div class="sticky top-0 z-10 theme-primary-bg p-4 rounded-t-2xl text-white flex justify-between items-center shadow-md">
                <h2 class="text-lg font-bold">Test GT25</h2>
                <div class="text-lg font-semibold bg-white/20 px-4 py-1 rounded-full">
                    <span id="timer">90:00</span>
                </div>
            </div>
            
            <div class="p-6 md:p-8">
                <div class="mb-6">
                    <p class="text-gray-500 font-semibold">Domanda <span id="question-number">1</span> di 80</p>
                    <div class="w-full bg-gray-200 rounded-full h-2.5 mt-2">
                        <div id="progress-bar" class="bg-[#5cadff] h-2.5 rounded-full" style="width: 1.25%"></div>
                    </div>
                </div>

                <p id="question-text" class="text-xl font-medium theme-text mb-8 min-h-[6rem]"></p>

                <div id="options-container" class="space-y-4">
                    <!-- Options will be injected here -->
                </div>
            </div>

            <div class="sticky bottom-0 bg-gray-50 p-4 rounded-b-2xl border-t border-gray-200 flex justify-between items-center">
                <button id="prev-btn" class="btn-secondary font-semibold py-2 px-6 rounded-lg">Precedente</button>
                <button id="next-btn" class="btn-primary font-semibold py-2 px-6 rounded-lg">Successivo</button>
                <button id="submit-btn" class="hidden btn-primary font-bold py-2 px-6 rounded-lg">Consegna il Test</button>
            </div>
        </div>

        <!-- Results Screen -->
        <div id="results-screen" class="hidden theme-bg rounded-2xl shadow-xl p-8 md:p-12 text-center fade-in">
            <h1 class="text-3xl md:text-4xl font-bold theme-text mb-4">Risultati del Test</h1>
            <p class="text-gray-600 mb-8">Ecco il riepilogo della tua prova.</p>

            <div id="result-badge" class="mb-8">
                <!-- Pass/Fail badge will be injected here -->
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 text-left">
                <div class="bg-gray-100 p-6 rounded-xl">
                    <h3 class="font-bold text-lg text-gray-800 mb-2">Punteggio Finale</h3>
                    <p class="text-5xl font-extrabold theme-secondary-text"><span id="final-score">0</span><span class="text-3xl text-gray-500">/40</span></p>
                </div>
                <div class="bg-gray-100 p-6 rounded-xl">
                    <h3 class="font-bold text-lg text-gray-800 mb-3">Dettagli</h3>
                    <div class="space-y-2 text-gray-700">
                        <div class="flex justify-between items-center">
                            <span><svg class="w-5 h-5 inline mr-2 text-green-500" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg>Risposte Corrette:</span>
                            <span id="correct-count" class="font-bold text-lg">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span><svg class="w-5 h-5 inline mr-2 text-red-500" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>Risposte Sbagliate:</span>
                            <span id="incorrect-count" class="font-bold text-lg">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span><svg class="w-5 h-5 inline mr-2 text-gray-500" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path></svg>Risposte non date:</span>
                            <span id="unanswered-count" class="font-bold text-lg">0</span>
                        </div>
                    </div>
                </div>
            </div>

            <button id="restart-btn" class="mt-10 btn-primary font-bold py-3 px-10 text-lg rounded-full shadow-lg">Riprova il Test</button>
        </div>

    </div>

    <script>
        const questionsData = {
          "questions": [
            { "text": "Quale periodo artistico è noto per aver avuto inizio con il Proto-Rinascimento di Giotto e culminato nell'Alto Rinascimento con artisti come Leonardo da Vinci, Michelangelo e Raffaello?", "options": ["Barocco", "Manierismo", "Rinascimento", "Neoclassicismo"], "correct_answer_index": 2 },
            { "text": "Quale artista è considerato uno dei massimi esponenti del Barocco italiano, noto per il suo uso drammatico della luce e dell'ombra (chiaroscuro)?", "options": ["Sandro Botticelli", "Caravaggio", "Raffaello Sanzio", "Giotto"], "correct_answer_index": 1 },
            { "text": "La città di Firenze è particolarmente rinomata come culla di quale importante movimento artistico italiano?", "options": ["Futurismo", "Barocco", "Rinascimento", "Arte Povera"], "correct_answer_index": 2 },
            { "text": "Quale movimento artistico italiano del XX secolo si concentrava sulla velocità, la tecnologia e la modernità?", "options": ["Macchiaioli", "Futurismo", "Arte Metafisica", "Novecento Italiano"], "correct_answer_index": 1 },
            { "text": "Quale delle seguenti opere è stata creata da Leonardo da Vinci?", "options": ["La Nascita di Venere", "La Gioconda", "La Cappella Sistina", "David (scultura)"], "correct_answer_index": 1 },
            { "text": "Michelangelo Buonarroti è famoso per quale delle seguenti sculture?", "options": ["Perseo con la testa di Medusa", "David", "Estasi di Santa Teresa", "Apollo e Dafne"], "correct_answer_index": 1 },
            { "text": "Il Manierismo, un periodo artistico che seguì l'Alto Rinascimento, è caratterizzato da:", "options": ["Equilibrio e armonia delle forme", "Figure allungate e pose complesse", "Semplicità e realismo", "Colori vivaci e pennellate rapide"], "correct_answer_index": 1 },
            { "text": "Quale artista è considerato il pioniere del Proto-Rinascimento italiano?", "options": ["Masaccio", "Giotto", "Sandro Botticelli", "Piero della Francesca"], "correct_answer_index": 1 },
            { "text": "Quale città italiana è diventata un importante centro artistico durante il Barocco e il Rococò?", "options": ["Firenze", "Venezia", "Milano", "Roma"], "correct_answer_index": 3 },
            { "text": "I Macchiaioli furono un gruppo di pittori italiani attivi nel XIX secolo che si opponevano all'accademismo e sperimentavano con:", "options": ["La prospettiva lineare", "Le tecniche di affresco", "Le macchie di colore e la luce naturale", "Il simbolismo religioso"], "correct_answer_index": 2 },
            { "text": "Quale corrente artistica del primo XX secolo in Italia cercava di rappresentare la realtà oltre l'apparenza fisica, esplorando l'ignoto e il sogno?", "options": ["Futurismo", "Arte Metafisica", "Novecento Italiano", "Arte Povera"], "correct_answer_index": 1 },
            { "text": "Quale importante opera di Raffaello Sanzio si trova nella Stanza della Segnatura in Vaticano?", "options": ["La Nascita di Venere", "La Creazione di Adamo", "La Scuola di Atene", "Il Giudizio Universale"], "correct_answer_index": 2 },
            { "text": "Quale fu la principale caratteristica dell'arte romana, che la differenziò dall'arte greca?", "options": ["L'idealizzazione delle figure", "Il realismo e la funzionalità", "L'uso esclusivo del marmo", "L'assenza di ritrattistica"], "correct_answer_index": 1 },
            { "text": "L'Arte Povera, movimento artistico emerso in Italia negli anni '60, utilizzava materiali:", "options": ["Preziosi e lussuosi", "Tecnologici e futuristici", "Semplici e di recupero", "Tradizionali e accademici"], "correct_answer_index": 2 },
            { "text": "Quale artista è noto per aver dipinto la \"Primavera\" e \"La Nascita di Venere\"?", "options": ["Tiziano", "Sandro Botticelli", "Masaccio", "Andrea Mantegna"], "correct_answer_index": 1 },
            { "text": "L'architettura romanica in Italia è caratterizzata da:", "options": ["Grandi vetrate e slancio verticale", "Mura spesse, archi a tutto sesto e piccole aperture", "Cupole rinascimentali e facciate classicheggianti", "Linee curve e decorazioni sontuose"], "correct_answer_index": 1 },
            { "text": "Quale corrente artistica si sviluppò in Italia tra la fine del XIX e l'inizio del XX secolo, caratterizzata da decorazioni floreali e linee sinuose?", "options": ["Art Nouveau (Stile Liberty in Italia)", "Neoclassicismo", "Impressionismo", "Espressionismo"], "correct_answer_index": 0 },
            { "text": "Quale dei seguenti non è un periodo dell'arte italiana menzionato nei riassunti di Wikipedia?", "options": ["Proto-Rinascimento", "Arte Gotica", "Surrealismo", "Manierismo"], "correct_answer_index": 2 },
            { "text": "Quale catena montuosa delimita il confine settentrionale dell'Italia con il continente europeo?", "options": ["Appennini", "Dolomiti", "Alpi", "Pirenei"], "correct_answer_index": 2 },
            { "text": "Quali sono le due isole più grandi del Mediterraneo appartenenti all'Italia?", "options": ["Ischia e Capri", "Elba e Lampedusa", "Sicilia e Sardegna", "Pantelleria e Giglio"], "correct_answer_index": 2 },
            { "text": "Quale mare bagna la costa orientale dell'Italia?", "options": ["Mar Tirreno", "Mar Ligure", "Mare Adriatico", "Mar Ionio"], "correct_answer_index": 2 },
            { "text": "Qual è la più vasta e importante pianura italiana, situata nel nord del paese?", "options": ["Pianura Salentina", "Pianura Padana", "Maremma", "Campania Felix"], "correct_answer_index": 1 },
            { "text": "Quale dorsale montuosa attraversa l'intera penisola italiana da nord a sud?", "options": ["Alpi Apuane", "Appennini", "Prealpi", "Massiccio del Gran Sasso"], "correct_answer_index": 1 },
            { "text": "L'Italia confina a nord con quali paesi?", "options": ["Spagna, Portogallo, Germania", "Francia, Svizzera, Austria, Slovenia", "Grecia, Turchia, Croazia", "Monaco, San Marino, Città del Vaticano"], "correct_answer_index": 1 },
            { "text": "Quale stato sovrano è un'enclave all'interno del territorio italiano?", "options": ["Malta", "Monaco", "San Marino", "Corsica"], "correct_answer_index": 2 },
            { "text": "Qual è la forma caratteristica della penisola italiana?", "options": ["Quadrata", "Ovale", "A stivale", "A triangolo"], "correct_answer_index": 2 },
            { "text": "Il Mar Tirreno si trova a quale lato della penisola italiana?", "options": ["Est", "Nord", "Ovest", "Sud"], "correct_answer_index": 2 },
            { "text": "Quale fiume italiano attraversa la Pianura Padana?", "options": ["Arno", "Tevere", "Po", "Adige"], "correct_answer_index": 2 },
            { "text": "Le isole Pelagie di Lampedusa e Lampione sono geograficamente situate più vicine a quale continente?", "options": ["Europa", "Asia", "Africa", "America"], "correct_answer_index": 2 },
            { "text": "Quale delle seguenti è la terza isola italiana per estensione?", "options": ["Capri", "Isola d'Elba", "Ischia", "Pantelleria"], "correct_answer_index": 1 },
            { "text": "Il clima mediterraneo in Italia è caratterizzato principalmente da:", "options": ["Inverni rigidi e nevosi, estati fresche", "Inverni miti e estati calde e secche", "Piogge abbondanti tutto l'anno", "Temperature costanti durante tutte le stagioni"], "correct_answer_index": 1 },
            { "text": "Qual è la percentuale approssimativa del territorio italiano coperta da montagne?", "options": ["10%", "25%", "40%", "60%"], "correct_answer_index": 2 },
            { "text": "Quale dei seguenti mari non bagna le coste italiane?", "options": ["Mar Ionio", "Mar Ligure", "Mare del Nord", "Mar Adriatico"], "correct_answer_index": 2 },
            { "text": "La Corsica, sebbene faccia parte della regione geografica italiana, appartiene politicamente a quale nazione?", "options": ["Spagna", "Italia", "Francia", "Grecia"], "correct_answer_index": 2 },
            { "text": "Qual è la lunghezza approssimativa della costa italiana, incluse le isole?", "options": ["Circa 2.000 km", "Circa 4.000 km", "Circa 6.000 km", "Circa 7.900 km"], "correct_answer_index": 3 },
            { "text": "La Sicilia è separata dal continente africano dallo:", "options": ["Stretto di Gibilterra", "Canale di Suez", "Stretto di Messina", "Stretto di Sicilia"], "correct_answer_index": 3 },
            { "text": "Quando fu proclamata l'unità e l'indipendenza d'Italia, dando vita al Regno d'Italia?", "options": ["1848", "1861", "1870", "1918"], "correct_answer_index": 1 },
            { "text": "Quale evento segnò la fine dell'Impero Romano d'Occidente nel 476 d.C.?", "options": ["La battaglia di Adrianopoli", "Il sacco di Roma da parte dei Visigoti", "La deposizione di Romolo Augustolo da parte di Odoacre", "La divisione dell'Impero in Oriente e Occidente"], "correct_answer_index": 2 },
            { "text": "Quale periodo storico vide la fioritura dei liberi comuni e il regno normanno-svevo in Italia?", "options": ["Alto Medioevo", "Basso Medioevo", "Rinascimento", "Età napoleonica"], "correct_answer_index": 1 },
            { "text": "Quale movimento politico e sociale portò all'unificazione italiana nel XIX secolo?", "options": ["Illuminismo", "Romanticismo", "Risorgimento", "Fascismo"], "correct_answer_index": 2 },
            { "text": "Chi fu il leader del Fascismo in Italia, salito al potere nell'ottobre del 1922?", "options": ["Giuseppe Garibaldi", "Vittorio Emanuele II", "Benito Mussolini", "Camillo Benso di Cavour"], "correct_answer_index": 2 },
            { "text": "Dopo la Seconda Guerra Mondiale, quale forma di governo fu adottata in Italia tramite un referendum istituzionale nel 1946?", "options": ["Monarchia assoluta", "Dittatura", "Repubblica", "Impero"], "correct_answer_index": 2 },
            { "text": "Quale civiltà antica ha avuto l'Italia come centro e origine?", "options": ["Greca", "Egizia", "Romana", "Persiana"], "correct_answer_index": 2 },
            { "text": "Quali popolazioni barbariche si insediarono in Italia dopo la caduta dell'Impero Romano d'Occidente?", "options": ["Unni e Vandali", "Goti e Bizantini, poi Longobardi", "Mongoli e Saraceni", "Vichinghi e Slavi"], "correct_answer_index": 1 },
            { "text": "Il Rinascimento italiano fiorì principalmente tra quali secoli?", "options": ["X e XI secolo", "XII e XIII secolo", "XV e XVI secolo", "XVIII e XIX secolo"], "correct_answer_index": 2 },
            { "text": "Quale importante scoperta geografica vide protagonisti esploratori italiani durante l'Età delle Scoperte?", "options": ["La circumnavigazione dell'Africa", "La scoperta delle Americhe", "Il passaggio a nord-est", "L'esplorazione dell'Antartide"], "correct_answer_index": 1 },
            { "text": "Dopo l'unificazione, la capitale del Regno d'Italia fu inizialmente ________, poi ________, e infine Roma. Quale opzione completa correttamente la frase?", "options": ["Milano, Napoli", "Torino, Firenze", "Venezia, Genova", "Palermo, Bari"], "correct_answer_index": 1 },
            { "text": "L'Italia ha co-fondato quale delle seguenti organizzazioni internazionali dopo la Seconda Guerra Mondiale?", "options": ["Nazioni Unite", "Unione Europea", "Patto di Varsavia", "Lega delle Nazioni"], "correct_answer_index": 1 },
            { "text": "La crisi del terzo secolo d.C. e la morte di Marco Aurelio sono spesso associate all'inizio del declino di quale impero?", "options": ["Impero Persiano", "Impero Bizantino", "Impero Romano", "Impero Ottomano"], "correct_answer_index": 2 },
            { "text": "Quali entità politiche si svilupparono in Italia nel Medioevo, prosperando grazie al commercio e gettando le basi del capitalismo moderno?", "options": ["Feudi e Baronie", "Monarchie assolute", "Città-stato e Repubbliche Marinare", "Califfati"], "correct_answer_index": 2 },
            { "text": "In quale conflitto mondiale l'Italia partecipò al fianco delle potenze dell'Intesa dal 1915 al 1918?", "options": ["Guerra franco-prussiana", "Prima Guerra Mondiale", "Seconda Guerra Mondiale", "Guerra fredda"], "correct_answer_index": 1 },
            { "text": "Durante la Seconda Guerra Mondiale, l'Italia fascista fu inizialmente parte di quale schieramento?", "options": ["Alleati", "Asse", "Neutrali", "Comintern"], "correct_answer_index": 1 },
            { "text": "Chi fu il re del Regno d'Italia durante il periodo dell'unificazione (Risorgimento)?", "options": ["Carlo Alberto di Savoia", "Vittorio Emanuele II", "Umberto I", "Vittorio Emanuele III"], "correct_answer_index": 1 },
            { "text": "La costituzione italiana entrò in vigore il:", "options": ["2 giugno 1946", "1 gennaio 1948", "25 aprile 1945", "4 novembre 1918"], "correct_answer_index": 1 },
            { "text": "Quali antiche città romane furono sepolte dall'eruzione del Vesuvio nel 79 d.C., offrendo uno spaccato eccezionale della vita quotidiana romana?", "options": ["Roma e Ostia Antica", "Paestum e Selinunte", "Pompei ed Ercolano", "Siracusa e Agrigento"], "correct_answer_index": 2 },
            { "text": "Quale monumento, simbolo della grandezza dell'antica Roma, è incluso nel Parco Archeologico del Colosseo?", "options": ["Pantheon", "Castel Sant'Angelo", "Colosseo", "Terme di Caracalla"], "correct_answer_index": 2 },
            { "text": "La Valle dei Templi, con i suoi magnifici templi dorici, si trova in quale città siciliana?", "options": ["Siracusa", "Taormina", "Agrigento", "Palermo"], "correct_answer_index": 2 },
            { "text": "Quale civiltà è associata alle necropoli come quella di Tarquinia?", "options": ["Romana", "Greca", "Etrusca", "Fenicia"], "correct_answer_index": 2 },
            { "text": "La Villa Romana del Casale, famosa per i suoi eccezionali mosaici, si trova in quale località siciliana?", "options": ["Catania", "Messina", "Piazza Armerina", "Trapani"], "correct_answer_index": 2 },
            { "text": "Il complesso nuragico di Su Nuraxi di Barumini, Patrimonio dell'Umanità UNESCO, si trova in quale regione italiana?", "options": ["Puglia", "Sardegna", "Toscana", "Lazio"], "correct_answer_index": 1 },
            { "text": "Quale antico porto romano, con i resti di un castrum del IV secolo a.C., si trova vicino alla foce del Tevere?", "options": ["Baia", "Pozzuoli", "Ostia Antica", "Brindisi"], "correct_answer_index": 2 },
            { "text": "Qual è il nome del teatro greco-romano situato in una posizione panoramica a Taormina, Sicilia?", "options": ["Teatro di Siracusa", "Teatro Massimo", "Teatro Antico di Taormina", "Arena di Verona"], "correct_answer_index": 2 },
            { "text": "Le Catacombe di Roma, estese per centinaia di chilometri sotto la città, furono costruite tra quali secoli?", "options": ["I e II secolo d.C.", "II e V secolo d.C.", "VI e VIII secolo d.C.", "IX e XI secolo d.C."], "correct_answer_index": 1 },
            { "text": "Quale sito archeologico, parte del Parco Archeologico del Colosseo, era il centro più vibrante dell'antica Roma?", "options": ["Mercati di Traiano", "Circo Massimo", "Foro Romano", "Terme di Diocleziano"], "correct_answer_index": 2 },
            { "text": "Quale dei seguenti non è un sito archeologico UNESCO in Italia menzionato nel testo?", "options": ["Pompei ed Ercolano", "Valle dei Templi (Agrigento)", "Su Nuraxi di Barumini", "Area Archeologica di Sibari"], "correct_answer_index": 3 },
            { "text": "La colonizzazione greca in Italia antica si concentrò prevalentemente in quale area geografica?", "options": ["Italia settentrionale", "Italia centrale", "Italia meridionale (Magna Grecia)", "Isole del Mediterraneo occidentale"], "correct_answer_index": 2 },
            { "text": "Quale divinità romana era onorata in templi dorici ben conservati a Paestum?", "options": ["Giove", "Giunone", "Nettuno", "Minerva"], "correct_answer_index": 2 },
            { "text": "Quale ruolo ricopriva Oplontis, i cui resti si trovano a Torre Annunziata?", "options": ["Una città portuale militare", "Un insediamento rurale agricolo", "Un centro commerciale di tessuti", "Una località con ville sontuose di rappresentanza"], "correct_answer_index": 3 },
            { "text": "Il Museo Archeologico Nazionale di Napoli è famoso per ospitare molti manufatti provenienti da quali siti?", "options": ["Pompei ed Ercolano", "Ostia Antica e Cerveteri", "Paestum e Velia", "Roma e il Palatino"], "correct_answer_index": 0 },
            { "text": "Quale era la funzione principale del Foro Romano nell'antica Roma?", "options": ["Un'area residenziale per l'imperatore", "Un luogo per spettacoli gladiatorii", "Il centro politico, religioso e commerciale", "Un'area di sepoltura per i cittadini"], "correct_answer_index": 2 },
            { "text": "Quali popolazioni sono attestate nell'Italia centrale e settentrionale durante il periodo della colonizzazione greca e punica?", "options": ["Fenici e Egizi", "Persiani e Babilonesi", "Etruschi e Celti", "Illiri e Traci"], "correct_answer_index": 2 },
            { "text": "Il Ministero della Cultura italiano si occupa della tutela e valorizzazione di quali aspetti del patrimonio nazionale?", "options": ["Economia e finanza", "Industria e commercio", "Archeologia, belle arti e paesaggio", "Sanità e istruzione"], "correct_answer_index": 2 },
            { "text": "Quale legge italiana del 1983 è stata la prima normativa a tentare di armonizzare il settore turistico, stabilendo principi generali per lo Stato e le Regioni?", "options": ["Legge 135/2001", "Codice del Turismo (D.Lgs. 79/2011)", "Legge Quadro 217/1983", "Riforma Costituzionale del 2001"], "correct_answer_index": 2 },
            { "text": "La Riforma Costituzionale del 2001 ha attribuito la materia del turismo alla competenza esclusiva di quale livello di governo in Italia?", "options": ["Stato", "Province", "Comuni", "Regioni"], "correct_answer_index": 3 },
            { "text": "Il Codice del Turismo (Decreto Legislativo n. 79/2011) è stato parzialmente abrogato dalla Corte Costituzionale con la Sentenza 80/2012 principalmente perché:", "options": ["Non promuoveva il turismo ecosostenibile.", "Contraddiceva la competenza esclusiva delle Regioni in materia di turismo post-riforma costituzionale del 2001.", "Non tutelava adeguatamente i consumatori.", "Non prevedeva incentivi per le piccole e medie imprese turistiche."], "correct_answer_index": 1 },
            { "text": "Quale articolo della Costituzione italiana afferma che ogni cittadino può circolare e risiedere liberamente nel territorio nazionale, salvo limitazioni per motivi di sanità o sicurezza?", "options": ["Articolo 1", "Articolo 16", "Articolo 21", "Articolo 32"], "correct_answer_index": 1 },
            { "text": "L'accessibilità turistica si limita all'abbattimento delle barriere architettoniche per persone con disabilità motorie?", "options": ["Sì, è l'unico aspetto considerato.", "No, include anche esigenze sensoriali, cognitive e alimentari.", "Solo per quanto riguarda le strutture ricettive.", "Dipende dalla regione italiana."], "correct_answer_index": 1 },
            { "text": "Quale iniziativa italiana assegna un riconoscimento ai comuni che si distinguono per il miglioramento dell'accessibilità turistica?", "options": ["Fondo per l'Accessibilità Turistica", "European Accessibility Act", "Progetto Bandiera Lilla", "PNRR"], "correct_answer_index": 2 },
            { "text": "A partire da quale data l'European Accessibility Act impone che tutti gli hotel con sistemi di prenotazione online debbano rendere il proprio sito accessibile?", "options": ["1 gennaio 2024", "28 giugno 2025", "31 dicembre 2023", "1 luglio 2026"], "correct_answer_index": 1 },
            { "text": "Oltre ai benefici etici, l'investimento nel turismo accessibile porta quali vantaggi per gli operatori del settore?", "options": ["Una riduzione dei costi operativi.", "Un aumento della platea di potenziali clienti e una maggiore soddisfazione.", "Minore necessità di formazione del personale.", "Una semplificazione delle normative fiscali."], "correct_answer_index": 1 },
            { "text": "Qual è il nome del Decreto Legislativo del 2004 che regola principalmente la disciplina dei beni culturali e del paesaggio in Italia?", "options": ["Legge Galasso", "Codice Urbani", "Legge Bottai", "Decreto Franceschini"], "correct_answer_index": 1 },
            { "text": "Quale articolo della Costituzione italiana sancisce la tutela del paesaggio e del patrimonio storico e artistico della Nazione?", "options": ["Articolo 1", "Articolo 9", "Articolo 21", "Articolo 32"], "correct_answer_index": 1 },
            { "text": "La tutela dei beni culturali, secondo il Codice, consiste principalmente nell'individuazione, protezione e conservazione per quali fini?", "options": ["Esclusivo sfruttamento commerciale", "Ricerca scientifica privata", "Pubblica fruizione", "Uso governativo esclusivo"], "correct_answer_index": 2 },
            { "text": "I Piani Paesaggistici Regionali (PPR) sono elaborati in collaborazione tra lo Stato e quali altre entità per definire le politiche di tutela e valorizzazione del paesaggio?", "options": ["Singoli Comuni", "Organizzazioni non governative", "Regioni", "Università"], "correct_answer_index": 2 }
          ]
        };

        const app = {
            // DOM Elements
            homeScreen: document.getElementById('home-screen'),
            testScreen: document.getElementById('test-screen'),
            resultsScreen: document.getElementById('results-screen'),
            startBtn: document.getElementById('start-btn'),
            prevBtn: document.getElementById('prev-btn'),
            nextBtn: document.getElementById('next-btn'),
            submitBtn: document.getElementById('submit-btn'),
            restartBtn: document.getElementById('restart-btn'),
            timerEl: document.getElementById('timer'),
            questionNumberEl: document.getElementById('question-number'),
            progressBarEl: document.getElementById('progress-bar'),
            questionTextEl: document.getElementById('question-text'),
            optionsContainer: document.getElementById('options-container'),
            finalScoreEl: document.getElementById('final-score'),
            resultBadgeEl: document.getElementById('result-badge'),
            correctCountEl: document.getElementById('correct-count'),
            incorrectCountEl: document.getElementById('incorrect-count'),
            unansweredCountEl: document.getElementById('unanswered-count'),

            // State
            questions: questionsData.questions,
            currentQuestionIndex: 0,
            userAnswers: [],
            timerInterval: null,
            testDuration: 90 * 60, // 90 minutes in seconds

            init() {
                this.userAnswers = new Array(this.questions.length).fill(null);
                this.addEventListeners();
            },

            addEventListeners() {
                this.startBtn.addEventListener('click', () => this.startTest());
                this.nextBtn.addEventListener('click', () => this.changeQuestion(1));
                this.prevBtn.addEventListener('click', () => this.changeQuestion(-1));
                this.submitBtn.addEventListener('click', () => this.endTest());
                this.restartBtn.addEventListener('click', () => this.restartTest());
            },

            startTest() {
                this.homeScreen.classList.add('hidden');
                this.resultsScreen.classList.add('hidden');
                this.testScreen.classList.remove('hidden');
                this.currentQuestionIndex = 0;
                this.userAnswers.fill(null);
                this.loadQuestion(this.currentQuestionIndex);
                this.startTimer();
            },

            startTimer() {
                let duration = this.testDuration;
                this.updateTimerDisplay(duration);
                this.timerInterval = setInterval(() => {
                    duration--;
                    this.updateTimerDisplay(duration);
                    if (duration <= 0) {
                        this.endTest();
                    }
                }, 1000);
            },

            updateTimerDisplay(seconds) {
                const minutes = Math.floor(seconds / 60);
                const remainingSeconds = seconds % 60;
                this.timerEl.textContent = `${minutes.toString().padStart(2, '0')}:${remainingSeconds.toString().padStart(2, '0')}`;
            },

            loadQuestion(index) {
                const question = this.questions[index];
                this.questionNumberEl.textContent = index + 1;
                this.progressBarEl.style.width = `${((index + 1) / this.questions.length) * 100}%`;
                this.questionTextEl.textContent = question.text;
                this.optionsContainer.innerHTML = '';

                question.options.forEach((option, i) => {
                    const isSelected = this.userAnswers[index] === i;
                    const optionId = `q${index}o${i}`;
                    const optionEl = document.createElement('label');
                    optionEl.htmlFor = optionId;
                    optionEl.className = `option-label flex items-center p-4 border-2 border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50 ${isSelected ? 'selected' : ''}`;
                    optionEl.innerHTML = `
                        <input type="radio" id="${optionId}" name="question${index}" value="${i}" class="hidden">
                        <span class="flex-1 text-lg">${option}</span>
                        <div class="w-6 h-6 border-2 border-gray-300 rounded-full flex items-center justify-center ml-4">
                            ${isSelected ? '<div class="w-3 h-3 bg-[#5cadff] rounded-full"></div>' : ''}
                        </div>
                    `;
                    optionEl.addEventListener('click', () => this.selectAnswer(index, i));
                    this.optionsContainer.appendChild(optionEl);
                });
                this.updateNavButtons();
            },

            selectAnswer(questionIndex, answerIndex) {
                this.userAnswers[questionIndex] = answerIndex;
                this.loadQuestion(questionIndex); // Reload to show selection
            },

            changeQuestion(direction) {
                const newIndex = this.currentQuestionIndex + direction;
                if (newIndex >= 0 && newIndex < this.questions.length) {
                    this.currentQuestionIndex = newIndex;
                    this.loadQuestion(this.currentQuestionIndex);
                }
            },

            updateNavButtons() {
                this.prevBtn.disabled = this.currentQuestionIndex === 0;
                this.prevBtn.classList.toggle('opacity-50', this.currentQuestionIndex === 0);

                if (this.currentQuestionIndex === this.questions.length - 1) {
                    this.nextBtn.classList.add('hidden');
                    this.submitBtn.classList.remove('hidden');
                } else {
                    this.nextBtn.classList.remove('hidden');
                    this.submitBtn.classList.add('hidden');
                }
            },

            endTest() {
                clearInterval(this.timerInterval);
                this.calculateScore();
                this.testScreen.classList.add('hidden');
                this.resultsScreen.classList.remove('hidden');
            },

            calculateScore() {
                let score = 0;
                let correct = 0;
                let incorrect = 0;
                let unanswered = 0;

                this.questions.forEach((q, i) => {
                    const userAnswer = this.userAnswers[i];
                    if (userAnswer === null) {
                        unanswered++;
                    } else if (userAnswer === q.correct_answer_index) {
                        score += 0.50;
                        correct++;
                    } else {
                        score -= 0.25;
                        incorrect++;
                    }
                });
                
                score = Math.max(0, score); // Score cannot be negative

                this.finalScoreEl.textContent = score.toFixed(2).replace('.', ',');
                this.correctCountEl.textContent = correct;
                this.incorrectCountEl.textContent = incorrect;
                this.unansweredCountEl.textContent = unanswered;

                if (score >= 25) {
                    this.resultBadgeEl.innerHTML = `
                        <div class="inline-flex items-center bg-green-100 text-green-800 text-xl font-bold px-6 py-3 rounded-full">
                            <svg class="w-8 h-8 mr-3" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>
                            PROVA SUPERATA
                        </div>`;
                } else {
                    this.resultBadgeEl.innerHTML = `
                        <div class="inline-flex items-center bg-red-100 text-red-800 text-xl font-bold px-6 py-3 rounded-full">
                            <svg class="w-8 h-8 mr-3" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path></svg>
                            PROVA NON SUPERATA
                        </div>`;
                }
            },

            restartTest() {
                this.resultsScreen.classList.add('hidden');
                this.homeScreen.classList.remove('hidden');
            }
        };

        app.init();
    </script>
</body>
</html>
